<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HireHub — Login / Register</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap">
<style>
  :root{
    --bg1:#0f172a;
    --grad1:#00509e;
    --grad2:#6a11cb;
    --card:#0f172a;
    --accent:#00bfff;
    --glass: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Poppins",system-ui,Segoe UI,Roboto,Arial;
    min-height:100vh;
    background: linear-gradient(135deg,var(--grad1),var(--grad2));
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
    color:#e6eef8;
  }

  .wrapper{
    width:980px;
    max-width:100%;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:14px;
    box-shadow:0 8px 30px rgba(2,6,23,0.5);
    overflow:hidden;
    display:grid;
    grid-template-columns: 420px 1fr;
    gap:0;
  }

  .brand-panel{
    padding:28px;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    display:flex;
    flex-direction:column;
    gap:18px;
    align-items:center;
    justify-content:center;
    text-align:center;
  }
  .brand-panel img.logo{
    width:84px;height:84px;border-radius:12px;background:#fff;padding:6px;
  }
  .brand-panel h1{margin:0;font-size:20px;letter-spacing:0.6px;}
  .brand-panel p{margin:0;color:rgba(255,255,255,0.75);font-size:14px;max-width:320px}

  .auth-panel{
    padding:34px;
  }
  .tabs{
    display:flex; gap:8px; margin-bottom:18px;
    background:var(--glass); padding:6px; border-radius:12px;
    width:max-content;
  }
  .tab{
    padding:10px 18px; border-radius:9px; cursor:pointer; font-weight:600; color:rgba(255,255,255,0.9)
  }
  .tab.active{ background:linear-gradient(90deg,var(--grad1),var(--grad2)); color:white; box-shadow:0 4px 14px rgba(0,0,0,0.25) }

  form{ display:grid; gap:12px; max-width:520px }
  label{ font-size:13px; color:rgba(255,255,255,0.85); font-weight:600 }
  input, select {
    padding:12px 14px; border-radius:8px; border:none; outline:none;
    background: rgba(255,255,255,0.04); color: #f0f8ff; font-size:14px;
  }
  .row{ display:flex; gap:10px }
  .btn{
    margin-top:6px; padding:12px 14px; background:linear-gradient(90deg,var(--grad1),var(--grad2));
    color:white; border:none; border-radius:10px; cursor:pointer; font-weight:700;
  }
  .muted{ color:rgba(255,255,255,0.7); font-size:13px }

  .social {
    margin-top:14px; display:flex; gap:8px; align-items:center;
  }
  .hint { font-size:13px; color:rgba(255,255,255,0.7); margin-top:8px }

  .notice { margin-top:10px; padding:10px; border-radius:8px; background:rgba(0,0,0,0.25); color:#bfe7ff; display:none; }

  @media(max-width:880px){
    .wrapper{grid-template-columns: 1fr; padding:12px}
    .brand-panel{display:none}
    .auth-panel{padding:18px}
  }
</style>
</head>
<body>
  <div class="wrapper" role="main">
    <div class="brand-panel" aria-hidden="false">
      
      <img class="logo" src="logo.jpg" style="width: auto;height:auto;">
      <h1>HireHub</h1>
      <p>Modern hiring platform — professionals post CVs, employers discover talent. Sign up or log in to continue.</p>
      <div class="hint">Secure | Professional | Affordable</div>
    </div>

    <div class="auth-panel" aria-live="polite">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div class="tabs" role="tablist" aria-label="Auth tabs">
          <div id="tabLogin" class="tab active" role="tab" aria-selected="true">Login</div>
          <div id="tabRegister" class="tab" role="tab">Register</div>
        </div>
        <div class="muted">New to HireHub? Register in seconds</div>
      </div>

      <!-- LOGIN FORM -->
      <form id="loginForm" style="display:grid;">
        <label for="loginEmail">Email</label>
        <input id="loginEmail" type="email" autocomplete="username" required placeholder="you@example.com">
        <label for="loginPassword">Password</label>
        <input id="loginPassword" type="password" autocomplete="current-password" required placeholder="Enter password">
        <button type="button" class="btn" id="loginBtn">Login</button>
        <div class="notice" id="loginNotice"></div>
        <div style="margin-top:10px" class="muted">Login as <strong>Professional</strong> or <strong>Employer</strong>.</div>
      </form>

      <!-- REGISTER FORM -->
      <form id="registerForm" style="display:none;">
        <label for="regName">Full name</label>
        <input id="regName" type="text" placeholder="Jane Doe" required>

        <label for="regEmail">Email</label>
        <input id="regEmail" type="email" placeholder="you@example.com" required>

        <div class="row">
          <div style="flex:1">
            <label for="regPassword">Password</label>
            <input id="regPassword" type="password" placeholder="Create password" required>
          </div>
          <div style="width:160px">
            <label for="role">Role</label>
            <select id="regRole" required>
              <option value="professional">Professional</option>
              <option value="employer">Employer</option>
            </select>
          </div>
        </div>

        <button type="button" class="btn" id="registerBtn">Create Account</button>
        <div class="notice" id="regNotice"></div>
        <div class="hint">By creating an account you agree to our terms. You can upload CVs as a Professional.</div>
      </form>

    </div>
  </div>

<script>
  const tabLogin = document.getElementById('tabLogin');
  const tabRegister = document.getElementById('tabRegister');
  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');
  const loginNotice = document.getElementById('loginNotice');
  const regNotice = document.getElementById('regNotice');

  function showLogin(){
    tabLogin.classList.add('active'); tabRegister.classList.remove('active');
    loginForm.style.display='grid'; registerForm.style.display='none';
    tabLogin.setAttribute('aria-selected','true'); tabRegister.setAttribute('aria-selected','false');
  }
  function showRegister(){
    tabRegister.classList.add('active'); tabLogin.classList.remove('active');
    registerForm.style.display='grid'; loginForm.style.display='none';
    tabRegister.setAttribute('aria-selected','true'); tabLogin.setAttribute('aria-selected','false');
  }

  tabLogin.addEventListener('click', showLogin);
  tabRegister.addEventListener('click', showRegister);

  // Base API url (backend)
  const API = 'http://127.0.0.1:5000';

  // REGISTER
  document.getElementById('registerBtn').addEventListener('click', async () => {
    regNotice.style.display = 'none';
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const password = document.getElementById('regPassword').value;
    const role = document.getElementById('regRole').value;

    if(!name || !email || !password) {
      regNotice.style.display='block'; regNotice.textContent='Please fill all fields.'; return;
    }

    try{
      const res = await fetch(API + '/register', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ name, email, password, role }),
        credentials: 'include'
      });
      const j = await res.json();
      if(res.ok){
        regNotice.style.display='block'; regNotice.textContent = 'Account created — you are now logged in.';
        // redirect based on role
        setTimeout(()=> {
          if(j.role === 'professional') window.location.href = 'dashboard.html';
          else window.location.href = 'browse.html';
        },900);
      } else {
        regNotice.style.display='block'; regNotice.textContent = j.message || 'Registration failed';
      }
    } catch(err){
      regNotice.style.display='block'; regNotice.textContent = 'Cannot reach server.';
    }
  });

  // LOGIN
  document.getElementById('loginBtn').addEventListener('click', async () => {
    loginNotice.style.display='none';
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    if(!email || !password) { loginNotice.style.display='block'; loginNotice.textContent='Enter email and password.'; return; }

    try{
      const res = await fetch(API + '/login', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ email, password }),
        credentials: 'include'
      });
      const j = await res.json();
      if(res.ok){
        loginNotice.style.display='block'; loginNotice.textContent = 'Login successful.';
        setTimeout(()=> {
          if(j.role === 'professional') window.location.href = 'dashboard.html';
          else window.location.href = 'browse.html';
        },700);
      } else {
        loginNotice.style.display='block'; loginNotice.textContent = j.message || 'Login failed';
      }
    } catch(e){
      loginNotice.style.display='block'; loginNotice.textContent = 'Cannot reach server.';
    }
  });

  // Accessibility: switch tab with keyboard
  tabLogin.addEventListener('keydown', e => { if(e.key === 'Enter') showLogin(); });
  tabRegister.addEventListener('keydown', e => { if(e.key === 'Enter') showRegister(); });
</script>
</body>
</html>
